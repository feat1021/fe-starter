# <center>异步外壳</center>

### 1. 代码展示

```ts
/**
 * 执行异步函数
 * @param promise 异步函数
 * @returns [异常数据, 成功数据]
 */
export const excPromise = <T>(promise: Promise<T>) => {
  let resData: [any, T];
  return promise
    .then((data) => {
      resData = [null, data];
      return resData;
    })
    .catch((err) => {
      resData = [err, null];
      return resData;
    });
};
```

此函数有以下优势：

- 不需要每个异步都添加 try...catch 来捕获异常；异常一定会输出在数组的第一项
- 不需要在 try...catch 外部通过 let 定义一个变量来记录当前异步返回值；返回值一定输出在数组的第二项
- 使用此函数可以清晰知道当前是否是异常情况，避免白屏、忘记添加 loading 等

### 2. 对比案例
